<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="description" content="Create a blank state for [[refinement | refine]]." />

    <title>createState</title>

    
    <link rel="stylesheet" href="../assets/megadoc__styles.css" />
    

    
  </head>

  <body class="body--themed">
    <div id="__app__"><div data-reactroot="" data-reactid="1" data-react-checksum="-1692233245"><div data-reactid="2"></div><!-- react-empty: 3 --><div class="root root--with-multi-page-layout root--with-two-column-layout root--with-fixed-sidebar root--without-banner" data-reactid="4"><div class="root__screen" data-reactid="5"><div class="two-column-layout two-column-layout--fixed" data-reactid="6"><div class="two-column-layout__left" style="width:340px;" data-reactid="7"><div class="resizable-panel" data-reactid="8"><div class="resizable-panel__content" data-reactid="9"><div data-reactid="10"><div data-reactid="11"><nav class="megadoc-document-browser markdown-browser" data-reactid="12"><div data-reactid="13"><div data-reactid="14"><a href="../index.html#full-metal-alchemy" class="class-browser__entry-link mega-link mega-link--functional" data-reactid="15"><!-- react-text: 16 -->Full Metal Alchemy
<!-- /react-text --></a></div></div></nav></div><div data-reactid="17"><h3 class="layout__sidebar-header" data-reactid="18">API</h3></div><div data-reactid="19"><nav class="megadoc-document-browser class-browser__listing" data-reactid="20"><div class="class-browser__category" data-reactid="21"><div class="class-browser__entry class-browser__entry--active" data-reactid="22"><a href="#createState" class="class-browser__entry-link active mega-link mega-link--active mega-link--functional" data-reactid="23"><!-- react-text: 24 -->createState<!-- /react-text --></a><ul class="class-browser__methods" data-reactid="25"><li class="class-browser__methods-entity" data-reactid="26"><a title="createState~Metric" href="#~Metric" class="mega-link mega-link--functional" data-reactid="27">~Metric</a><ul class="class-browser__methods" data-reactid="28"><li class="class-browser__methods-entity" data-reactid="29"><a title="createState~Metric.constraints" href="#~Metric.constraints" class="mega-link mega-link--functional" data-reactid="30">.constraints</a></li><li class="class-browser__methods-entity" data-reactid="31"><a title="createState~Metric.dataPoints" href="#~Metric.dataPoints" class="mega-link mega-link--functional" data-reactid="32">.dataPoints</a></li><li class="class-browser__methods-entity" data-reactid="33"><a title="createState~Metric.events" href="#~Metric.events" class="mega-link mega-link--functional" data-reactid="34">.events</a></li><li class="class-browser__methods-entity" data-reactid="35"><a title="createState~Metric.name" href="#~Metric.name" class="mega-link mega-link--functional" data-reactid="36">.name</a></li></ul></li><li class="class-browser__methods-entity" data-reactid="37"><a title="createState~MetricState" href="#~MetricState" class="mega-link mega-link--functional" data-reactid="38">~MetricState</a><ul class="class-browser__methods" data-reactid="39"><li class="class-browser__methods-entity" data-reactid="40"><a title="createState~MetricState.context" href="#~MetricState.context" class="mega-link mega-link--functional" data-reactid="41">.context</a></li><li class="class-browser__methods-entity" data-reactid="42"><a title="createState~MetricState.metrics" href="#~MetricState.metrics" class="mega-link mega-link--functional" data-reactid="43">.metrics</a></li><li class="class-browser__methods-entity" data-reactid="44"><a title="createState~MetricState.points" href="#~MetricState.points" class="mega-link mega-link--functional" data-reactid="45">.points</a></li></ul></li></ul></div><div class="class-browser__entry" data-reactid="46"><a href="refine.html#refine" class="class-browser__entry-link mega-link mega-link--functional" data-reactid="47"><!-- react-text: 48 -->refine<!-- /react-text --></a></div></div></nav></div><div data-reactid="49"><h3 class="layout__sidebar-header" data-reactid="50">API: Auxiliary</h3></div><div data-reactid="51"><nav class="megadoc-document-browser class-browser__listing" data-reactid="52"><div class="class-browser__category" data-reactid="53"><div class="class-browser__entry" data-reactid="54"><a href="DataPoint.html#DataPoint" class="class-browser__entry-link mega-link mega-link--functional" data-reactid="55"><!-- react-text: 56 -->DataPoint<!-- /react-text --></a></div><div class="class-browser__entry" data-reactid="57"><a href="Period.html#Period" class="class-browser__entry-link mega-link mega-link--functional" data-reactid="58"><!-- react-text: 59 -->Period<!-- /react-text --></a></div><div class="class-browser__entry" data-reactid="60"><a href="Tuple.html#Tuple" class="class-browser__entry-link mega-link mega-link--functional" data-reactid="61"><!-- react-text: 62 -->Tuple<!-- /react-text --></a></div></div></nav></div><div data-reactid="63"><h3 class="layout__sidebar-header" data-reactid="64">API: Constraints</h3></div><div data-reactid="65"><nav class="megadoc-document-browser class-browser__listing" data-reactid="66"><div class="class-browser__category" data-reactid="67"><div class="class-browser__entry" data-reactid="68"><a href="Constraint.html#Constraint" class="class-browser__entry-link mega-link mega-link--functional" data-reactid="69"><!-- react-text: 70 -->Constraint<!-- /react-text --></a></div><div class="class-browser__entry" data-reactid="71"><a href="FrequencyConstraint.html#FrequencyConstraint" class="class-browser__entry-link mega-link mega-link--functional" data-reactid="72"><!-- react-text: 73 -->FrequencyConstraint<!-- /react-text --></a></div><div class="class-browser__entry" data-reactid="74"><a href="OrderConstraint.html#OrderConstraint" class="class-browser__entry-link mega-link mega-link--functional" data-reactid="75"><!-- react-text: 76 -->OrderConstraint<!-- /react-text --></a></div><div class="class-browser__entry" data-reactid="77"><a href="ParametricRateConstraint.html#ParametricRateConstraint" class="class-browser__entry-link mega-link mega-link--functional" data-reactid="78"><!-- react-text: 79 -->ParametricRateConstraint<!-- /react-text --></a></div><div class="class-browser__entry" data-reactid="80"><a href="ProximityConstraint.html#ProximityConstraint" class="class-browser__entry-link mega-link mega-link--functional" data-reactid="81"><!-- react-text: 82 -->ProximityConstraint<!-- /react-text --></a></div><div class="class-browser__entry" data-reactid="83"><a href="RateConstraint.html#RateConstraint" class="class-browser__entry-link mega-link mega-link--functional" data-reactid="84"><!-- react-text: 85 -->RateConstraint<!-- /react-text --></a></div><div class="class-browser__entry" data-reactid="86"><a href="StrictOrderConstraint.html#StrictOrderConstraint" class="class-browser__entry-link mega-link mega-link--functional" data-reactid="87"><!-- react-text: 88 -->StrictOrderConstraint<!-- /react-text --></a></div><div class="class-browser__entry" data-reactid="89"><a href="TypeConstraint.html#TypeConstraint" class="class-browser__entry-link mega-link mega-link--functional" data-reactid="90"><!-- react-text: 91 -->TypeConstraint<!-- /react-text --></a></div></div></nav></div></div></div><div class="ui-resizable-handle ui-resizable-e" data-reactid="92"></div></div></div><div class="two-column-layout__right" style="margin-left:340px;" data-reactid="93"><div data-reactid="94"><div class="doc-content" data-reactid="95"><div data-reactid="96"><div class="class-view" data-reactid="97"><div data-reactid="98"><h1 class="class-view__header anchorable-heading" data-reactid="99"><span class="anchorable-heading__text" data-reactid="100">createState</span><!-- react-text: 101 --> <!-- /react-text --><!-- react-text: 102 --> <!-- /react-text --><span class="class-view__header-type" data-reactid="103"><span data-reactid="104"><span data-reactid="105">Function</span></span></span></h1><div class="highlighted-text " data-reactid="106"><p>Create a blank state for <a href="refine.html" title="Produce metric points from a one or more application events and an optional context." class="mega-link--internal">refinement</a>.</p>
</div></div><div data-reactid="107"><div data-reactid="108"><div data-reactid="109"><h2 class="doc-group__header" data-reactid="110">Signature</h2><div class="doc-entity collapsible--expanded" data-reactid="111"><h3 class="doc-entity__header collapsible-header" title="createState" data-reactid="112"><span class="anchorable-heading__text" data-reactid="113"><span class="doc-entity__name-fragment" data-reactid="114">createState</span><span class="doc-entity__function-signature" data-reactid="115">(<em>metrics</em>: Array.&lt;<a class="mega-link--internal" href="#~Metric" title="The definition of a metric and the points it should produce.">Metric</a>&gt;)</span><span class="doc-entity__method-params" data-reactid="116"><!-- react-text: 117 --> -&gt; <!-- /react-text --><span class="js-type-names" data-reactid="118"><a class="mega-link--internal" href="#~MetricState" title="The &quot;metric state&quot; is a transient structure to be used as input for [[refinement | refine]]. It contains a reference to the metrics to be used as well as the output of the process; the metric points and, optionally, the adjusted context.">MetricState</a></span></span></span></h3><div class="doc-entity__description" data-reactid="119"></div><div class="doc-entity__tags" data-reactid="120"><!-- react-empty: 121 --><!-- react-empty: 122 --><!-- react-empty: 123 --><!-- react-empty: 124 --></div></div></div><div data-reactid="125"></div><div class="doc-group" data-reactid="126"><h2 class="doc-group__header" data-reactid="127">Type Definitions</h2><ul class="class-view__type-def-list" data-reactid="128"><div class="doc-entity collapsible collapsible--expanded" data-reactid="129"><h3 class="doc-entity__header collapsible-header anchorable-heading" title="Metric" data-reactid="130"><i class="icon collapser collapsible__icon icon-arrow-down" data-reactid="131"></i><a name="~Metric" class="anchorable-heading__anchor" data-reactid="132"></a><a class="anchorable-heading__link icon icon-link" href="#~Metric" data-reactid="133"></a><span class="anchorable-heading__text" data-reactid="134"><span class="doc-entity__name-fragment" data-reactid="135">Metric</span></span></h3><div class="doc-entity__description" data-reactid="136"><div class="highlighted-text " data-reactid="137"><p>The definition of a metric and the points it should produce.</p>
</div></div><div class="doc-entity__tags" data-reactid="138"><!-- react-empty: 139 --><!-- react-empty: 140 --><!-- react-empty: 141 --><!-- react-empty: 142 --><!-- react-empty: 143 --><!-- react-empty: 144 --></div><h4 class="tag-group__header" data-reactid="145">Properties</h4><div class="property-tag collapsible" data-reactid="146"><header class="property-tag__header anchorable-heading collapsible-header" data-reactid="147"><i class="icon collapser collapsible__icon icon-arrow-down" data-reactid="148"></i><a name="~Metric.events" class="anchorable-heading__anchor" data-reactid="149"></a><a class="anchorable-heading__link icon icon-link" href="#~Metric.events" data-reactid="150"></a><span class="property-tag__name" data-reactid="151">events</span><!-- react-text: 152 -->: <!-- /react-text --><code data-reactid="153"><span class="js-type-names" data-reactid="154">Array.&lt;String&gt;</span></code></header><div class="highlighted-text property-tag__description" data-reactid="155"><p>Convenience property for defining a <a href="TypeConstraint.html" title="Block events that do not match the specified names or data." class="mega-link--internal">type constraint</a> on
this metric to make it use only the events specified.</p>
</div></div><div class="property-tag collapsible" data-reactid="156"><header class="property-tag__header anchorable-heading collapsible-header" data-reactid="157"><i class="icon collapser collapsible__icon icon-arrow-down" data-reactid="158"></i><a name="~Metric.name" class="anchorable-heading__anchor" data-reactid="159"></a><a class="anchorable-heading__link icon icon-link" href="#~Metric.name" data-reactid="160"></a><span class="property-tag__name" data-reactid="161">name</span><!-- react-text: 162 -->: <!-- /react-text --><code data-reactid="163"><span class="js-type-names" data-reactid="164">String</span></code></header><div class="highlighted-text property-tag__description" data-reactid="165"><p>A name to associate with the points produced by this metric. It is worth
noting that this name does not have to be unique. You can have multiple
metrics generating points with the same &quot;name&quot; but from different sources.</p>
</div></div><div class="property-tag collapsible" data-reactid="166"><header class="property-tag__header anchorable-heading collapsible-header" data-reactid="167"><i class="icon collapser collapsible__icon icon-arrow-down" data-reactid="168"></i><a name="~Metric.constraints" class="anchorable-heading__anchor" data-reactid="169"></a><a class="anchorable-heading__link icon icon-link" href="#~Metric.constraints" data-reactid="170"></a><span class="property-tag__name" data-reactid="171">constraints</span><!-- react-text: 172 -->: <!-- /react-text --><code data-reactid="173"><span class="js-type-names" data-reactid="174">Array.&lt;<a class="mega-link--internal" href="Constraint.html" title="The interface of a constraint and its available hooks.">Constraint</a>&gt;</span></code></header><div class="highlighted-text property-tag__description" data-reactid="175"><p>Constraints that control how and when points are produced. This is the
&quot;meat&quot; of the metric and gives you a lot of power in <a href="refine.html" title="Produce metric points from a one or more application events and an optional context." class="mega-link--internal">refining</a>
raw <a href="refine.html#~ApplicationEvent" class="mega-link--internal">application events</a> into <a href="refine.html#~MetricPoint" class="mega-link--internal">points</a>.</p>
</div></div><div class="property-tag collapsible" data-reactid="176"><header class="property-tag__header anchorable-heading collapsible-header" data-reactid="177"><i class="icon collapser collapsible__icon icon-arrow-down" data-reactid="178"></i><a name="~Metric.dataPoints" class="anchorable-heading__anchor" data-reactid="179"></a><a class="anchorable-heading__link icon icon-link" href="#~Metric.dataPoints" data-reactid="180"></a><span class="property-tag__name" data-reactid="181">dataPoints</span><!-- react-text: 182 -->: <!-- /react-text --><code data-reactid="183"><span class="js-type-names" data-reactid="184">Array.&lt;<a class="mega-link--internal" href="DataPoint.html" title="Functions for storing data from application events in metric points. These functions are utilized in the [[definition of metrics | createState]].">DataPoint</a>&gt;</span></code></header><div class="highlighted-text property-tag__description" data-reactid="185"><p>Data that the metric point should contain.</p>
<p>A data point is a map between a name, something that describes the data in
the metric point, and a value.</p>
<p>The name is arbitrary and gives you a chance to rename application event
data when it makes sense to do so. The value can be generated in a number
of ways as explained in <a href="DataPoint.html" title="Functions for storing data from application events in metric points. These functions are utilized in the [[definition of metrics | createState]]." class="mega-link--internal">DataPoint</a>.</p>
<p>Below are sample definitions:</p>
<pre class="language-javascript"><code><span class="token punctuation" >{</span>
  dataPoints<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
    <span class="token comment" spellcheck="true">// point data "a" will contain application event data "aaa"</span>
    <span class="token punctuation" >{</span>
      name<span class="token punctuation" >:</span> <span class="token string" >'a'</span><span class="token punctuation" >,</span>
      value<span class="token punctuation" >:</span> data <span class="token operator" >=</span><span class="token operator" >></span> data<span class="token punctuation" >.</span>aaa
    <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
    <span class="token comment" spellcheck="true">// point data "b" will be true or false based on whether</span>
    <span class="token comment" spellcheck="true">// the event data "b" is present</span>
    <span class="token punctuation" >{</span>
      name<span class="token punctuation" >:</span> <span class="token string" >'b'</span><span class="token punctuation" >,</span>
      value<span class="token punctuation" >:</span> DataPoint<span class="token punctuation" >.</span><span class="token function" >flag</span><span class="token punctuation" >(</span><span class="token string" >'b'</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >}</span>
  <span class="token punctuation" >]</span>
<span class="token punctuation" >}</span></code></pre><p>Passing a <code>String</code> for a <a href="DataPoint.html" title="Functions for storing data from application events in metric points. These functions are utilized in the [[definition of metrics | createState]]." class="mega-link--internal">DataPoint</a> will cause it to morph into one that
simply <a href="DataPoint.html#.reflect" title="Reflect the value found at @path in the event&#39;s data." class="mega-link--internal">reflects</a> the value found in the application
event data. This is merely a convenience property since it&#39;s what you may
want to do most of the time. For example:</p>
<pre class="language-javascript"><code><span class="token punctuation" >{</span>
  dataPoints<span class="token punctuation" >:</span> <span class="token punctuation" >[</span> <span class="token string" >'a'</span> <span class="token punctuation" >]</span>
<span class="token punctuation" >}</span></code></pre><p>The metric point will contain a data point called &quot;a&quot; that is equal to
whatever &quot;a&quot; was set to in the event&#39;s data.</p>
</div></div></div><div class="doc-entity collapsible collapsible--expanded" data-reactid="186"><h3 class="doc-entity__header collapsible-header anchorable-heading" title="MetricState" data-reactid="187"><i class="icon collapser collapsible__icon icon-arrow-down" data-reactid="188"></i><a name="~MetricState" class="anchorable-heading__anchor" data-reactid="189"></a><a class="anchorable-heading__link icon icon-link" href="#~MetricState" data-reactid="190"></a><span class="anchorable-heading__text" data-reactid="191"><span class="doc-entity__name-fragment" data-reactid="192">MetricState</span></span></h3><div class="doc-entity__description" data-reactid="193"><div class="highlighted-text " data-reactid="194"><p>The &quot;metric state&quot; is a transient structure to be used as input for
<a href="refine.html" title="Produce metric points from a one or more application events and an optional context." class="mega-link--internal">refinement</a>. It contains a reference to the metrics to be used as
well as the output of the process; the metric points and, optionally, the
adjusted context.</p>
</div></div><div class="doc-entity__tags" data-reactid="195"><!-- react-empty: 196 --><!-- react-empty: 197 --><!-- react-empty: 198 --><!-- react-empty: 199 --><!-- react-empty: 200 --><!-- react-empty: 201 --></div><h4 class="tag-group__header" data-reactid="202">Properties</h4><div class="property-tag" data-reactid="203"><header class="property-tag__header anchorable-heading" data-reactid="204"><a name="~MetricState.metrics" class="anchorable-heading__anchor" data-reactid="205"></a><a class="anchorable-heading__link icon icon-link" href="#~MetricState.metrics" data-reactid="206"></a><span class="property-tag__name" data-reactid="207">metrics</span><!-- react-text: 208 -->: <!-- /react-text --><code data-reactid="209"><span class="js-type-names" data-reactid="210">Array.&lt;<a class="mega-link--internal" href="#~Metric" title="The definition of a metric and the points it should produce.">Metric</a>&gt;</span></code></header></div><div class="property-tag" data-reactid="211"><header class="property-tag__header anchorable-heading" data-reactid="212"><a name="~MetricState.points" class="anchorable-heading__anchor" data-reactid="213"></a><a class="anchorable-heading__link icon icon-link" href="#~MetricState.points" data-reactid="214"></a><span class="property-tag__name" data-reactid="215">points</span><!-- react-text: 216 -->: <!-- /react-text --><code data-reactid="217"><span class="js-type-names" data-reactid="218">Array.&lt;<a class="mega-link--internal" href="refine.html#~MetricPoint">MetricPoint</a>&gt;</span></code></header></div><div class="property-tag" data-reactid="219"><header class="property-tag__header anchorable-heading" data-reactid="220"><a name="~MetricState.context" class="anchorable-heading__anchor" data-reactid="221"></a><a class="anchorable-heading__link icon icon-link" href="#~MetricState.context" data-reactid="222"></a><span class="property-tag__name" data-reactid="223">context</span><!-- react-text: 224 -->: <!-- /react-text --><code data-reactid="225"><span class="js-type-names" data-reactid="226">Any?</span></code></header></div></div></ul></div></div></div></div></div></div></div></div></div></div></div></div></div>

    <!-- Prepare UMD container -->
    <script>
      window.exports = {};
    </script>

    <!-- Megadoc core scripts -->
    
    <script type="text/javascript" src="../assets/megadoc__config.js"></script>
    
    <script type="text/javascript" src="../assets/megadoc__vendor.js"></script>
    
    <script type="text/javascript" src="../assets/megadoc.js"></script>
    

    <!-- Re-export common modules into MEGADOC_PUBLIC_MODULES -->
    <script type="text/javascript" src="../assets/megadoc__common.js"></script>
    <script>
      window.MEGADOC_PUBLIC_MODULES = exports['megadoc__common'];
    </script>

    <!-- Collect plugin script exports -->
    
    <script type="text/javascript" src="../assets/megadoc-plugin-markdown.js"></script>
    
    <script type="text/javascript" src="../assets/megadoc-plugin-js.js"></script>
    
    <script type="text/javascript" src="../assets/megadoc-theme-minimalist.js"></script>
    

    <!-- Load the plugins and start the client -->
    <script>
      window.startingDocumentUID = "e9518fb5dd7a65108b7ed1929b15500e";
      window.startingDocumentHref = "/api/createState.html";
      window.MEGADOC_PLUGINS = Object.keys(exports)
        .filter(function(key) {
          var thing = exports[key];

          return (
            thing &&
            typeof thing === 'object' &&
            typeof thing.name === 'string' &&
            (
              thing.plugin === true ||
              /megadoc-(theme|plugin)-/.test(thing.name)
            )
          );
        })
        .map(function(key) {
          return exports[key];
        })
      ;

      exports['megadoc'].startApp(exports['megadoc__config'], {
        startingDocumentUID: window.startingDocumentUID,
        startingDocumentHref: window.startingDocumentHref,
        plugins: window.MEGADOC_PLUGINS,
      });
    </script>
  </body>
</html>
